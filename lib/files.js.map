{"version":3,"sources":["../src/files.js"],"names":["zipDirectory","source","out","archive","zlib","level","stream","fs","createWriteStream","Promise","resolve","reject","directory","on","err","pipe","finalize"],"mappings":";;;;AAAA;;AACA;;AAEA,IAAMA,YAAY,GAAG,SAAfA,YAAe,CAACC,MAAD,EAASC,GAAT,EAAiB;AACpC,MAAMC,OAAO,GAAG,0BAAS,KAAT,EAAgB;AAAEC,IAAAA,IAAI,EAAE;AAAEC,MAAAA,KAAK,EAAE;AAAT;AAAR,GAAhB,CAAhB;;AACA,MAAMC,MAAM,GAAGC,eAAGC,iBAAH,CAAqBN,GAArB,CAAf;;AAEA,SAAO,IAAIO,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCR,IAAAA,OAAO,CACJS,SADH,CACaX,MADb,EACqB,KADrB,EAEGY,EAFH,CAEM,OAFN,EAEe,UAACC,GAAD;AAAA,aAASH,MAAM,CAACG,GAAD,CAAf;AAAA,KAFf,EAGGC,IAHH,CAGQT,MAHR;AAKAA,IAAAA,MAAM,CAACO,EAAP,CAAU,OAAV,EAAmB;AAAA,aAAMH,OAAO,EAAb;AAAA,KAAnB;AACAP,IAAAA,OAAO,CAACa,QAAR;AACD,GARM,CAAP;AASD,CAbD","sourcesContent":["import fs from \"fs\";\nimport archiver from \"archiver\";\n\nconst zipDirectory = (source, out) => {\n  const archive = archiver(\"zip\", { zlib: { level: 9 } });\n  const stream = fs.createWriteStream(out);\n\n  return new Promise((resolve, reject) => {\n    archive\n      .directory(source, false)\n      .on(\"error\", (err) => reject(err))\n      .pipe(stream);\n\n    stream.on(\"close\", () => resolve());\n    archive.finalize();\n  });\n};\n"],"file":"files.js"}